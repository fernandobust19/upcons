<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Página Web</title>

    <!-- Carga el componente <model-viewer> de Google -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.5.0/model-viewer.min.js"></script>
    <!-- Carga de Google Fonts (Orbitron) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Orbitron:wght@400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: sans-serif;
            margin: 0;
        }

        /* --- Estilos para el Header y Título Principal --- */
        .page-header {
            display: flex;
            flex-direction: column; /* Apila el logo y el título verticalmente */
            align-items: center;
            justify-content: center;
            gap: 10px; /* Reduce el espacio entre logo y título */
            text-align: center;
            margin-bottom: 40px; /* Aumenta el margen inferior */
            padding: 20px 10px; /* Añade padding */
            background: linear-gradient(to bottom, #e0f7fa 0%, #ffffff 100%); /* Degradado azul sutil */
            border-radius: 0 0 30px 30px; /* Bordes redondeados inferiores */
        }

        .main-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            color: #333;
            margin: 0;
            font-weight: 700; /* Negrilla */
            letter-spacing: 2px;
            /* Sombra sutil para un efecto elegante */
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.15);
            animation: fadeInGlow 1.5s ease-out 0.5s forwards;
            opacity: 0; /* Inicia invisible */
        }

        .header-logo {
            height: 80px; /* Altura del logo */
            width: auto;
        }

        @keyframes fadeInGlow {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Contenedor principal que usa Flexbox para el diseño */
        .main-container {
            display: flex;
            flex-wrap: wrap; /* Permite que los elementos se apilen en pantallas pequeñas */
            gap: 20px; /* Espacio entre el visor y el texto */
            align-items: flex-start; /* Alinea los items al inicio */
            padding: 0 20px; /* Añade el padding lateral que antes estaba en el body */
        }
        
        /* Contenedor que agrupa la imagen y los botones */
        .image-buttons-wrapper {
            display: flex;
            gap: 15px;
            align-items: flex-start;
            flex: 1;
            min-width: 300px;
        }
        /* Contenedor para la imagen estática */
        .image-container {
            flex: 1; /* Ocupa el espacio disponible */
            max-height: 60vh;
        }
        .static-image {
            width: 100%;
            height: auto;
            border-radius: 12px;
            object-fit: cover;
        }
        /* Contenedor para el texto */
        .text-container {
            flex: 2; /* Más espacio para el texto */
            min-width: 300px;
        }
        .text-container h1 {
            font-family: 'Lato', sans-serif; /* Fuente más moderna y atractiva */
            font-size: 1.4rem; /* Tamaño ajustado */
            font-weight: 700; /* Poner en negrilla */
            color: #6a4a9c; /* Un morado elegante y más sutil */
            margin-bottom: 15px;
            line-height: 1.3;
            /* Efecto 3D con sombra y luz */
            text-shadow: 
                0px 1px 1px rgba(0,0,0,0.2), /* Sombra sutil inferior */
                0px 2px 2px rgba(0,0,0,0.15), /* Sombra más profunda */
                0px 3px 3px rgba(0,0,0,0.1), /* Sombra aún más profunda */
                0 0 5px rgba(255, 255, 255, 0.5); /* Brillo de luz */
        }
        .text-container p {
            font-family: 'Lato', sans-serif; /* Fuente más elegante y legible */
            font-size: 1rem; /* Tamaño reducido */
            line-height: 1.6; /* Espacio entre líneas ajustado */
            color: #444; /* Un gris oscuro que es más suave que el negro puro */
            text-align: justify; /* Alineación justificada */
        }
        /* Estilos para el visor del modelo (ahora en el modal) */
        model-viewer {
            width: 100%;
            height: 100%;
            --poster-color: transparent; /* Fondo transparente mientras carga */
            /* Estilo para la barra de progreso */
            --progress-bar-color: #00f2ff;
            border-radius: 12px;
        }

        /* --- Estilos para el Overlay de Carga del 3D --- */
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 12px; /* Coincide con el visor */
            transition: opacity 0.3s ease;
        }

        /* Clase para desvanecer el overlay de carga */
        .loading-overlay.hide {
            display: none; /* Oculta completamente el elemento */
            pointer-events: none; /* ¡Esta es la clave! Ignora los clics en el overlay oculto */
        }

        .loading-percentage {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            color: #8a2be2;
            font-weight: bold;
        }

        /* --- Estilos para el botón y el panel de características --- */

        /* Contenedor para los botones, ahora en columna al lado de la imagen */
        .features-button-container {
            display: flex;
            flex-direction: column; /* Apila los botones verticalmente */
            gap: 10px; /* Espacio más pequeño entre botones */
            flex-shrink: 0; /* Evita que el contenedor de botones se encoja */
            justify-content: flex-start;
            align-items: center;
        }

        /* Estilo del botón de características */
        .features-button {
            position: relative;
            width: 70px; /* Tamaño más pequeño */
            height: 70px; /* Tamaño más pequeño */
            border-radius: 50%;
            border: none;
            padding: 5px; /* Pequeño padding para evitar que el texto toque los bordes */
            display: flex; /* Para centrar el texto vertical y horizontalmente */
            align-items: center;
            justify-content: center;
            text-align: center;
            background: linear-gradient(45deg, #00bfa5, #01579b); /* Gradiente elegante de verde-azulado a azul oscuro */
            color: white;
            font-size: 10px; /* Fuente más pequeña */
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s ease;
            animation: pulse-glow-smart 4s infinite ease-in-out;
            /* --- Evita el recuadro de selección en móviles --- */
            -webkit-touch-callout: none; /* iOS Safari */
            -webkit-user-select: none;   /* Safari */
            -khtml-user-select: none;    /* Konqueror HTML */
            -moz-user-select: none;      /* Old versions of Firefox */
            -ms-user-select: none;       /* Internet Explorer/Edge */
            user-select: none;           /* Standard */
        }

        /* Animación de pulso para el brillo del botón */
        @keyframes pulse-glow-smart {
            0%, 100% {
                box-shadow: 0 0 20px 3px rgba(0, 191, 165, 0.6);
            }
            50% {
                box-shadow: 0 0 30px 8px rgba(1, 87, 155, 0.6);
            }
        }

        .features-button:hover {
            transform: scale(1.05);
        }

        /* Panel de detalles, oculto por defecto */
        /* --- Estilos Genéricos para Modales --- */
        .modal-overlay {
            position: fixed; /* Se superpone a todo */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8); /* Fondo oscuro semitransparente */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0; /* Oculto por defecto */
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal-overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            position: relative;
            width: 90%;
            background-color: #fff;
            border-radius: 15px;
            padding: 20px;
            max-height: 90vh;
            overflow-y: auto;
        }

        /* Estilos específicos para el modal 3D */
        .modal-content.modal-3d {
            width: 80%;
            height: 80%;
            max-width: 900px;
        }
        /* Estilos específicos para el modal de características */
        .modal-content.modal-features {
            max-width: 600px;
        }

        /* --- Estilos para Subtítulos Elegantes en Modales --- */
        .modal-content h2 {
            position: relative; /* Necesario para el efecto de luz */
            font-family: 'Playfair Display', serif;
            text-align: center;
            font-size: 2rem;
            color: #fff; /* Texto blanco para contraste */
            /* Nuevo fondo oscuro y elegante */
            background: radial-gradient(ellipse at center, #333 0%, #111 100%);
            padding: 15px 20px;
            border-radius: 8px;
            overflow: hidden; /* Oculta el pseudo-elemento fuera del título */
            margin-bottom: 25px;
        }

        /* Pseudo-elemento para crear un efecto de luz tipo "aurora" */
        .modal-content h2::before {
            content: '';
            position: absolute;
            top: -50%;
            left: 0;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(0, 191, 165, 0.2), transparent, rgba(1, 87, 155, 0.2), transparent);
            animation: aurora-sweep 8s linear infinite;
        }

        /* Animación de la luz "aurora" */
        @keyframes aurora-sweep {
            from {
                transform: translateX(-50%) rotate(0deg);
            }
            to {
                transform: translateX(0) rotate(360deg);
            }
        }

        .modal-close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #222; /* Ligeramente más oscuro */
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1001;
        }

        .modal-image {
            float: right; /* Flota la imagen a la derecha */
            width: 45%; /* Reduce el ancho de la imagen */
            max-width: 250px; /* Ancho máximo para que no sea demasiado grande */
            margin-left: 15px; /* Espacio a la izquierda de la imagen */
            margin-bottom: 10px; /* Espacio debajo de la imagen */
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); /* Sombra sutil */
        }

        /* Estilos para la lista de medidas en el modal */
        .measures-list {
            list-style-type: none;
            padding-left: 0;
        }
        .measures-list li {
            background-color: #f0f0f0;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 5px;
            border-left: 4px solid #8a2be2;
        }

        /* --- Estilos para el layout del modal de medidas --- */
        .measures-layout {
            display: flex;
            flex-wrap: wrap; /* Para que se apile en pantallas pequeñas */
            gap: 20px;
            align-items: flex-start;
        }

        .measures-text {
            flex: 2; /* Ocupa más espacio */
            min-width: 250px;
        }

        .measures-gallery {
            flex: 1; /* Ocupa menos espacio */
            min-width: 150px;
            position: relative; /* Para posicionar las imágenes */
            height: 400px; /* Altura aumentada para el carrusel vertical */
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .gallery-inner {
            /* Contenedor que se animará verticalmente */
            animation: vertical-scroll 12s linear infinite;
        }

        .measures-gallery .gallery-image {
            /* Las imágenes ahora se apilan verticalmente */
            display: block;
            width: 100%;
            height: auto;
            object-fit: cover;
            margin-bottom: 10px; /* Espacio entre imágenes */
        }

        @keyframes vertical-scroll {
            from {
                transform: translateY(0);
            }
            to {
                transform: translateY(-50%); /* Desplaza la mitad del contenido para un bucle perfecto */
            }
        }

        /* Estilos para la lista de características */
        .features-list {
            display: grid; /* Usamos grid para un diseño de tarjetas moderno */
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* Columnas responsivas */
            gap: 20px; /* Espacio entre tarjetas */
            list-style-type: none;
            padding-left: 0;
        }
        .features-list li {
            background-color: #f8f9fa; /* Fondo suave para la tarjeta */
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #00bfa5; /* Acento de color del tema */
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            font-family: 'Lato', sans-serif;
        }
        .features-list li::before {
            /* Reemplazamos el check simple por un ícono más elaborado */
            content: '🛡️'; /* Usamos un emoji de escudo como placeholder visual */
            display: block;
            font-size: 2rem;
            margin-bottom: 10px;
            color: #00bfa5;
        }
        .features-list strong {
            display: block; /* El título en su propia línea */
            font-size: 1.1rem;
            color: #333;
            margin-bottom: 8px;
            font-weight: bold;
        }
        .features-list p { /* Estilo para el texto descriptivo */
            margin: 0;
            line-height: 1.6;
            color: #555;
        }

        /* Estilo para resaltar texto importante en los modales */
        .modal-content strong {
            background-color: #f0e6ff; /* Fondo lila muy claro */
            color: #6a4a9c; /* Color morado del tema */
            padding: 2px 5px;
            border-radius: 4px;
            font-weight: 700;
        }

        /* --- Estilos para la animación de aparición de texto --- */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .reveal-item {
            opacity: 0; /* Inicia invisible */
        }

        .reveal-item.animate {
            animation: fadeInUp 0.6s ease-out forwards;
        }

        /* --- Estilos para la sección de video --- */
        .video-section {
            /* Se centra el contenedor del video y se le da un ancho máximo */
            max-width: 300px; /* Ancho aún más reducido para disminuir la altura */
            margin: 0 auto 40px auto; /* Centra el contenedor y añade margen inferior */
            padding: 0 20px; /* Mantiene un espaciado si la pantalla es muy pequeña */
            box-sizing: border-box;
        }

        .video-section video {
            width: 100%;
            height: auto;
            border-radius: 15px;
            display: block; /* Para evitar espacios extra debajo del video */
        }

        /* --- Estilos para la sección de texto de convencimiento --- */
        .conviction-section {
            padding: 40px 20px;
            background-color: #ffffff;
            text-align: center;
        }

        .conviction-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .conviction-content h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            color: #8a2be2; /* Color principal */
            margin-bottom: 15px;
        }

        .conviction-content p {
            font-family: 'Lato', sans-serif;
            font-size: 1.1rem;
            color: #333;
            line-height: 1.7;
        }
        /* --- Nuevos Estilos para la Lista de Precios --- */
        .pricing-section {
            padding: 40px 20px;
            background-color: #f9f9f9; /* Un fondo suave para la sección */
        }

        .section-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            margin-bottom: 30px;
            text-align: center;
            color: #333;
        }

        .price-list {
            max-width: 800px;
            margin: 0 auto;
            list-style: none;
            padding: 0;
        }

        .price-item {
            display: flex;
            align-items: center;
            gap: 15px; /* Espacio reducido */
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            padding: 10px 15px; /* Padding reducido */
            margin-bottom: 15px;
            transition: box-shadow 0.2s ease; /* Solo transicionará la sombra */
        }

        .price-item:hover {
            /* Se elimina el efecto de movimiento */
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
        }

        .price-item-image {
            width: 60px; /* Imagen más pequeña */
            height: 60px; /* Imagen más pequeña */
            object-fit: cover;
            border-radius: 10px;
        }

        .price-item-info {
            flex-grow: 1;
        }

        .price-item-info h4 {
            margin: 0 0 5px 0;
            font-size: 1rem; /* Fuente más pequeña */
        }

        .price-item-info p {
            margin: 0;
            color: #555;
            font-size: 0.8rem; /* Fuente más pequeña */
        }

        .price-item-value {
            font-size: 1.3rem; /* Fuente de precio más pequeña */
            font-weight: bold;
            color: #8a2be2;
        }

        /* Contenedor para el botón de WhatsApp y el ícono externo */
        .whatsapp-cta-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px; /* Espacio entre el botón y el ícono */
            margin-top: 40px;
        }

        .whatsapp-icon {
            width: 60px; /* Tamaño del nuevo ícono */
            height: auto;
            transition: transform 0.3s ease;
        }

        .whatsapp-icon:hover {
            transform: scale(1.1);
        }

        .cta-button {
            /* Ajustes al botón existente */
            padding: 15px 25px;
            background: linear-gradient(45deg, #25D366, #128C7E); /* Colores de WhatsApp */
            color: white;
            text-align: center;
            text-decoration: none;
            font-weight: bold;
            border-radius: 8px;
            transition: background 0.3s ease;
        }

        .cta-button:hover {
            background: linear-gradient(45deg, #128C7E, #25D366); /* Invierte el gradiente en hover */
        }

        /* --- Estilos para el Pie de Página (Footer) --- */
        .site-footer {
            background-color: #2c2c2c;
            color: #ccc;
            padding: 40px 20px;
            text-align: center;
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .footer-content h3 {
            font-family: 'Orbitron', sans-serif;
            color: #fff;
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .footer-content p {
            margin: 0 0 25px 0;
            color: #aaa;
            font-size: 1rem;
            line-height: 1.6;
        }

        .footer-locations {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .location-links a {
            background-color: #444;
            color: #fff;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        .location-links a:hover {
            background-color: #8a2be2;
        }

        .location-item {
            margin-bottom: 20px;
        }

        .location-item h4 {
            color: #fff;
            margin: 0 0 5px 0;
        }

        .location-item p {
            margin: 0 0 10px 0;
            font-size: 0.9rem;
        }

        .location-item a {
            display: inline-flex; /* Para alinear ícono y texto */
            align-items: center;
            gap: 8px; /* Espacio entre ícono y texto */
            background-color: #4285F4; /* Color azul de Google */
            color: #fff; /* Texto blanco para mejor contraste */
            padding: 8px 15px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        .footer-bottom {
            border-top: 1px solid #444;
            padding-top: 20px;
            font-size: 0.9rem;
            color: #777;
        }
    </style>
</head>
<body>
    <header class="page-header">
        <img src="logo.png" alt="Logo Upcons" class="header-logo">
        <h1 class="main-title">TEJA ESPAÑOLA PVC</h1>
    </header>
    <div class="main-container">
        <div class="image-buttons-wrapper">
            <div class="image-container">
                <!-- Imagen estática que reemplaza al visor 3D -->
                <img src="teja.png" alt="Teja española de PVC" class="static-image">
            </div>
            <!-- Contenedor de botones al lado derecho de la imagen -->
            <div class="features-button-container">
                <!-- Botón para mostrar características -->
                <button id="features-btn" class="features-button">CONOCE</button>
                <!-- Nuevo botón para mostrar el visor 3D -->
                <button id="show-3d-btn" class="features-button">3D</button>
                <!-- Botón para Medidas -->
                <button id="measures-btn" class="features-button">MEDIDAS</button>
                <!-- Botón de ejemplo para Instalación -->
                <button id="install-btn" class="features-button">SISTEMA</button>
            </div>
        </div>
        <div class="text-container">
            <h1>Un Techo con Historia, una Solución del Futuro.</h1>
            <p>La apariencia icónica de la teja española, ahora reinventada en PVC de alto rendimiento. Experimente la tranquilidad de un techo que protege con eficacia, resiste el paso del tiempo y conserva un aspecto impecable sin el esfuerzo del mantenimiento tradicional. Su hogar merece lo mejor: una estética que perdura y una protección superior.</p>
        </div>
    </div>

    <!-- Sección para el video -->
    <section class="video-section">
        <video src="video.mp4" autoplay muted loop playsinline></video>
    </section>

    <!-- Nueva sección de texto persuasivo -->
    <section class="conviction-section">
        <div class="conviction-content">
            <h2>¿Listo para dar el paso definitivo hacia un techo superior?</h2>
            <p>No es solo una compra, es una inversión en la tranquilidad y el valor de su hogar. Cada teja está diseñada para ofrecer décadas de protección, belleza y rendimiento sin preocupaciones. Explore nuestras opciones y descubra por qué somos la elección inteligente para su proyecto.</p>
        </div>
    </section>

    <section class="pricing-section">
        <h2 class="section-title">Nuestros Productos</h2>
        <ul class="price-list">
            <li class="price-item">
                <img src="tejaventa.jpg" alt="Teja PVC" class="price-item-image">
                <div class="price-item-info"><h4>Teja española 6.14 m. X 1.05</h4><p>Fondo Naranja</p></div>
                <div class="price-item-value">$42.90</div>
            </li>
            <li class="price-item">
                <img src="tejaventa.jpg" alt="Teja PVC" class="price-item-image">
                <div class="price-item-info"><h4>Teja española 5.04 m. X 1.05</h4><p>Fondo Naranja</p></div>
                <div class="price-item-value">$35.00</div>
            </li>
            <li class="price-item">
                <img src="tejaventa.jpg" alt="Teja PVC" class="price-item-image">
                <div class="price-item-info"><h4>Teja española 4.16 m. X 1.05</h4><p>Fondo Naranja</p></div>
                <div class="price-item-value">$29.20</div>
            </li>
            <li class="price-item">
                <img src="tejaventa.jpg" alt="Teja PVC" class="price-item-image">
                <div class="price-item-info"><h4>Teja española 3.70 m. X 1.05</h4><p>Fondo Naranja</p></div>
                <div class="price-item-value">$25.90</div>
            </li>
            <li class="price-item">
                <img src="tejaventa.jpg" alt="Teja PVC" class="price-item-image">
                <div class="price-item-info"><h4>Teja española 3.06 m. X 1.05</h4><p>Fondo Naranja</p></div>
                <div class="price-item-value">$21.45</div>
            </li>
            <li class="price-item">
                <img src="tejaventa.jpg" alt="Teja PVC" class="price-item-image">
                <div class="price-item-info"><h4>Teja española 2.40 m. X 1.05</h4><p>Fondo Naranja</p></div>
                <div class="price-item-value">$18.00</div>
            </li>
        </ul>
        <!-- Puedes cambiar el enlace de WhatsApp -->
        <div class="whatsapp-cta-container">
            <a href="https://wa.me/593995986366?text=porfavor%20ayudame%20con%20una%20cotizacion," target="_blank" class="cta-button">
                Cotizar por WhatsApp
            </a>
            <img src="wat.png" alt="Ícono de WhatsApp" class="whatsapp-icon">
        </div>
    </section>

    <footer class="site-footer">
        <div class="footer-content">
            <h3>Nuestras Ubicaciones</h3>
            <div class="footer-locations"> <!-- Contenedor para los items de ubicación -->
                <div class="location-item">
                    <h4>Upcons Sur (La Ecuatoriana)</h4>
                    <p>Av. La Ecuatoriana & Martín Santiago Icaza</p>
                    <a href="https://maps.app.goo.gl/JX7EaUsHb8yT9vgA6?g_st=ac" target="_blank">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/></svg>
                        Ver en Google Maps
                    </a>
                </div>
                <div class="location-item">
                    <h4>Upcons (Mariscal Sucre)</h4>
                    <p>Av. Mariscal Sucre</p>
                    <a href="https://maps.app.goo.gl/6yk2nNjZJQ1WWJDA7?g_st=ac" target="_blank">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/></svg>
                        Ver en Google Maps
                    </a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Teja Española PVC. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Ventana Modal para el Visor 3D (inicialmente oculta) -->
    <div id="modal-3d" class="modal-overlay">
        <div class="modal-content modal-3d">
            <button id="modal-close" class="modal-close-btn">&times;</button>
            <!-- El visor 3D ahora vive aquí dentro -->
            <model-viewer id="main-viewer" src="teja.glb" alt="Un modelo 3D de una teja" camera-controls auto-rotate exposure="1.2" reveal="manual">
                <!-- Overlay de carga personalizado -->
                <div class="loading-overlay" slot="progress-bar"><span class="loading-percentage">Cargando...</span></div>
            </model-viewer>
        </div>
    </div>

    <!-- Ventana Modal para Características (inicialmente oculta) -->
    <div id="features-modal" class="modal-overlay">
        <div class="modal-content modal-features">
            <button id="features-close-btn" class="modal-close-btn">&times;</button>
            <h2>Características Principales</h2>
            <ul class="features-list">
                <li class="reveal-item"><strong>Ligereza</strong><p>Son mucho más livianas que las tejas tradicionales, lo que facilita su instalación y reduce la carga sobre la estructura del techo.</p></li>
                <li class="reveal-item"><strong>Resistencia</strong><p>Protegen eficazmente contra impactos, corrosión y rayos UV.</p></li>
                <li class="reveal-item"><strong>Aislamiento</strong><p>Ofrecen aislamiento térmico y acústico, mejorando la eficiencia energética de su hogar.</p></li>
                <li class="reveal-item"><strong>Durabilidad</strong><p>Su vida útil puede superar los 20 años, y algunos modelos garantizan la estabilidad del color por más de una década.</p></li>
                <li class="reveal-item"><strong>Bajo Mantenimiento</strong><p>Su superficie repele la suciedad y no requiere cuidados especiales.</p></li>
                <li class="reveal-item"><strong>Impermeabilidad Total</strong><p>Son completamente impermeables, evitando filtraciones de humedad.</p></li>
                <li class="reveal-item"><strong>Instalación Sencilla</strong><p>Su manejo es fácil y pueden ser instaladas sobre estructuras de madera o metal.</p></li>
            </ul>
        </div>
    </div>

    <!-- Ventana Modal para Medidas (inicialmente oculta) -->
    <div id="measures-modal" class="modal-overlay">
        <div class="modal-content modal-features">
            <button id="measures-close-btn" class="modal-close-btn">&times;</button>
            <h2>Medidas Disponibles</h2>
            <div class="measures-layout">
                <div class="measures-text">
                    <p class="reveal-item">Nuestras tejas se ofrecen en una variedad de longitudes para adaptarse a diferentes necesidades de construcción y minimizar los cortes y desperdicios:</p>
                    <ul class="measures-list">
                        <li class="reveal-item">Teja española 6.14 m. X 1.05</li>
                        <li class="reveal-item">Teja española 5.04 m. X 1.05</li>
                        <li class="reveal-item">Teja española 4.16 m. X 1.05</li>
                        <li class="reveal-item">Teja española 3.70 m. X 1.05</li>
                        <li class="reveal-item">Teja española 3.06 m. X 1.05</li>
                        <li class="reveal-item">Teja española 2.40 m. X 1.05</li>
                    </ul>
                    <p class="reveal-item"><strong>Nota:</strong> Todas las planchas tienen un ancho total de 1.05 metros y un espesor de 2.5 mm. El ancho útil es de aproximadamente 0.96 metros, después de considerar el solape para la instalación.</p>
                </div>
                <div class="measures-gallery">
                    <div class="gallery-inner">
                        <img src="t1.png" alt="Vista de teja 1" class="gallery-image">
                        <img src="t2.jpg" alt="Vista de teja 2" class="gallery-image">
                        <img src="t3.jpg" alt="Vista de teja 3" class="gallery-image">
                        <!-- Se duplican las imágenes para un bucle infinito y suave -->
                        <img src="t1.png" alt="Vista de teja 1" class="gallery-image">
                        <img src="t2.jpg" alt="Vista de teja 2" class="gallery-image">
                        <img src="t3.jpg" alt="Vista de teja 3" class="gallery-image">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ventana Modal para Instalación (inicialmente oculta) -->
    <div id="install-modal" class="modal-overlay">
        <div class="modal-content modal-features">
            <button id="install-close-btn" class="modal-close-btn">&times;</button>
            <h2>Instalación de la Cubierta</h2>
            <img src="instalacion.jpg" alt="Proceso de instalación de tejas de PVC" class="modal-image">
            <p class="reveal-item">La instalación de la cubierta comienza una vez que la estructura principal de columnas y vigas está firmemente montada. Esta fase se centra en el sistema de soporte y la fijación de las tejas para proteger el área de la intemperie.</p>
            <ul class="features-list">
                <li class="reveal-item"><strong>Montaje de las correas:</strong> Las correas metálicas se instalan sobre las vigas principales. Estas piezas horizontales son cruciales, ya que forman la base directa para la cubierta y distribuyen el peso hacia la estructura.</li>
                <li class="reveal-item"><strong>Preparación de la cubierta:</strong> Se procede a la colocación de las tejas sobre las correas. La instalación debe empezar en la parte más baja del techo y avanzar hacia la cumbrera (la parte más alta), superponiendo las piezas para garantizar una correcta evacuación del agua.</li>
                <li class="reveal-item"><strong>Fijación de la cubierta:</strong> Cada teja o lámina se debe fijar de manera segura a las correas utilizando tornillos o ganchos adecuados, especialmente en áreas propensas a vientos fuertes. Se presta especial atención al sellado de los puntos de unión para asegurar una protección completa contra filtraciones.</li>
            </ul>
        </div>
    </div>

    <script>
        // --- Lógica para el contador de carga del 3D ---
        const modelViewer = document.querySelector('#main-viewer');
        const loadingPercentage = document.querySelector('.loading-percentage');

        if (modelViewer && loadingPercentage) {
            const loadingOverlay = modelViewer.querySelector('.loading-overlay');

            // Escuchar el progreso de carga para actualizar el porcentaje
            modelViewer.addEventListener('progress', (event) => {
                const progress = event.detail.totalProgress;
                const percentage = Math.round(progress * 100);
                loadingPercentage.textContent = `Cargando... ${percentage}%`;
            });

            // Escuchar cuando el modelo termine de cargar completamente
            modelViewer.addEventListener('load', () => {
                // Ocultar el overlay de carga cuando el modelo esté completamente listo
                setTimeout(() => {
                    loadingOverlay.classList.add('hide');
                }, 300); // Pequeño delay para una transición suave
            });

            // También escuchar cuando el modelo esté listo para la interacción
            modelViewer.addEventListener('model-visibility', (event) => {
                if (event.detail.visible) {
                    // El modelo es visible y listo, ocultar overlay de carga
                    loadingOverlay.classList.add('hide');
                }
            });
        }

        // Función genérica para controlar los modales
        function setupModal(buttonId, modalId, closeButtonId) {
            let observer; // Variable para guardar el Intersection Observer
            const modelViewer = document.querySelector('#main-viewer'); // Seleccionamos el visor 3D
            const openButton = document.getElementById(buttonId);
            const modal = document.getElementById(modalId);
            const closeButton = document.getElementById(closeButtonId);

            // Abrir el modal
            openButton.addEventListener('click', () => {
                // Hacemos visible el modal
                modal.classList.add('visible');

                // --- Nueva Lógica con Intersection Observer ---
                // Opciones para el observer: se activa cuando el 20% del elemento es visible
                const options = {
                    root: modal.querySelector('.modal-content'), // Observa el scroll dentro del modal
                    rootMargin: '0px',
                    threshold: 0.2
                };

                observer = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        // Si el elemento está en la pantalla
                        if (entry.isIntersecting) {
                            entry.target.classList.add('animate'); // Añade la clase para animar
                            observer.unobserve(entry.target); // Deja de observar este elemento
                        }
                    });
                }, options);

                // Le decimos al observer qué elementos vigilar
                const itemsToReveal = modal.querySelectorAll('.reveal-item');
                itemsToReveal.forEach(item => observer.observe(item));

                // --- ¡ESTA ES LA PARTE CLAVE! ---
                // Si estamos abriendo el modal 3D, le decimos al visor que se muestre.
                if (modal.id === 'modal-3d' && modelViewer) {
                    // Resetear el overlay de carga antes de mostrar el modelo
                    const loadingOverlay = modelViewer.querySelector('.loading-overlay');
                    if (loadingOverlay) {
                        loadingOverlay.classList.remove('hide');
                    }
                    
                    // Esto activa la carga y renderizado del modelo.
                    modelViewer.dismissPoster();
                }
            });

            const closeModal = () => {
                modal.classList.remove('visible');

                // Resetea la animación al cerrar
                const itemsToReveal = modal.querySelectorAll('.reveal-item');
                itemsToReveal.forEach(item => {
                    item.classList.remove('animate');
                    item.style.animationDelay = ''; // Limpia el retraso
                });

                // Desconecta el observer para limpiar recursos
                if (observer) {
                    observer.disconnect();
                }

                if (modal.id === 'modal-3d' && modelViewer) {
                    modelViewer.showPoster();
                }
            };

            // Solo añadir los listeners para cerrar si el botón de cierre existe
            if (closeButton) {
                // Cerrar el modal con el botón 'X'
                closeButton.addEventListener('click', () => {
                    closeModal();
                });
            }

            // Cerrar el modal al hacer clic en el fondo oscuro
            modal.addEventListener('click', (event) => {
                if (event.target === modal) {
                    closeModal();
                }
            });
        }

        // Configurar el modal de Características
        setupModal('features-btn', 'features-modal', 'features-close-btn');

        // Configurar el modal 3D
        setupModal('show-3d-btn', 'modal-3d', 'modal-close');

        // Configurar el modal de Medidas
        setupModal('measures-btn', 'measures-modal', 'measures-close-btn');

        // Configurar el modal de Instalación (actualmente no hace nada)
        setupModal('install-btn', 'install-modal', 'install-close-btn');
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Página Web</title>

    <!-- Carga el componente <model-viewer> de Google -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.5.0/model-viewer.min.js"></script>

    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            padding: 20px;
        }

        /* --- Estilos para el Header y Título Principal --- */
        .page-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .main-title {
            font-size: 3rem;
            color: #333;
            margin: 0;
            font-weight: 300; /* Una fuente más fina para un look elegante */
            letter-spacing: 3px;
            /* Animación de entrada */
            animation: fadeInGlow 1.5s ease-out 0.5s forwards;
            opacity: 0; /* Inicia invisible */
            /* Sombra de texto para el efecto de luz */
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.9),
                         0 0 15px rgba(0, 242, 255, 0.4);
        }

        @keyframes fadeInGlow {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        /* Contenedor principal que usa Flexbox para el diseño */
        .main-container {
            display: flex;
            flex-wrap: wrap; /* Permite que los elementos se apilen en pantallas pequeñas */
            gap: 20px; /* Espacio entre el visor y el texto */
            align-items: center;
        }
        /* Contenedor para la imagen estática */
        .image-container {
            flex: 1; /* Ocupa el espacio disponible */
            min-width: 300px; /* Ancho mínimo para evitar que se encoja demasiado */
            max-height: 60vh;
        }
        .static-image {
            width: 100%;
            height: auto;
            border-radius: 12px;
            object-fit: cover;
        }
        /* Contenedor para el texto */
        .text-container {
            flex: 1;
            min-width: 300px;
        }
        /* Estilos para el visor del modelo (ahora en el modal) */
        model-viewer {
            width: 100%;
            height: 100%;
            --poster-color: transparent; /* Fondo transparente mientras carga */
            /* Estilo para la barra de progreso */
            --progress-bar-color: #00f2ff;
            border-radius: 12px;
        }

        /* --- Estilos para el botón y el panel de características --- */

        /* Contenedor para el botón */
        .features-button-container {
            display: flex;
            margin-top: 20px;
            gap: 20px; /* Espacio entre botones */
        }

        /* Estilo del botón de características */
        .features-button {
            position: relative; /* Necesario para el texto superpuesto */
            width: 100px; /* Tamaño reducido */
            height: 100px; /* Tamaño reducido */
            border-radius: 50%;
            border: none;
            /* Nuevos colores más vibrantes e "inteligentes" */
            background: linear-gradient(45deg, #00f2ff, #8a2be2, #ff00ff);
            color: white;
            font-size: 14px; /* Fuente ajustada */
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s ease;
            animation: pulse-glow-smart 4s infinite ease-in-out;
        }

        /* Animación de pulso para el brillo del botón */
        @keyframes pulse-glow-smart {
            0%, 100% {
                box-shadow: 0 0 25px 5px rgba(0, 242, 255, 0.5), 0 0 35px 15px rgba(255, 0, 255, 0.3);
            }
            50% {
                box-shadow: 0 0 35px 10px rgba(138, 43, 226, 0.5), 0 0 45px 20px rgba(0, 242, 255, 0.3);
            }
        }

        .features-button:hover {
            transform: scale(1.05);
        }

        /* Panel de detalles, oculto por defecto */
        /* --- Estilos Genéricos para Modales --- */
        .modal-overlay {
            position: fixed; /* Se superpone a todo */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8); /* Fondo oscuro semitransparente */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0; /* Oculto por defecto */
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal-overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        .modal-overlay.visible .animate-text {
            /* Inicia la animación cuando el modal es visible */
            animation-play-state: running;
        }

        .modal-content {
            position: relative;
            width: 90%;
            background-color: #fff;
            border-radius: 15px;
            padding: 20px;
            max-height: 90vh;
            overflow-y: auto;
        }

        /* Estilos específicos para el modal 3D */
        .modal-content.modal-3d {
            width: 80%;
            height: 80%;
            max-width: 900px;
        }
        /* Estilos específicos para el modal de características */
        .modal-content.modal-features {
            max-width: 600px;
        }

        .modal-close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #333;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1001;
        }

        /* Estilos para la lista de medidas en el modal */
        .measures-list {
            list-style-type: none;
            padding-left: 0;
        }
        .measures-list li {
            background-color: #f0f0f0;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 5px;
            border-left: 4px solid #8a2be2;
        }

        /* Estilos para la lista de características */
        .features-list {
            list-style-type: none;
            padding-left: 0;
        }
        .features-list li {
            margin-bottom: 12px;
            line-height: 1.5;
        }
        .features-list strong {
            color: #8a2be2; /* Color a juego con el tema */
        }

        /* --- Estilos para la animación de texto tipo Karaoke --- */
        @keyframes reveal-text {
            from {
                clip-path: inset(0 100% 0 0);
            }
            to {
                clip-path: inset(0 0 0 0);
            }
        }

        .karaoke-text {
            /* Aplica la animación pero la deja en pausa por defecto */
            animation: reveal-text 2s ease-out forwards;
            animation-play-state: paused;
            /* Pequeño retraso para que la animación no sea tan abrupta */
            animation-delay: 0.3s;
        }
    </style>
</head>
<body>
    <header class="page-header">
        <h1 class="main-title">TEJA ESPAÑOLA PVC</h1>
    </header>
    <div class="main-container">
        <div class="image-container">
            <!-- Imagen estática que reemplaza al visor 3D -->
            <img src="teja.png" alt="Teja española de PVC" class="static-image">
        </div>
        <div class="text-container">
            <h1>Un Techo con Historia, una Solución del Futuro.</h1>
            <p>La apariencia icónica de la teja española, ahora reinventada en PVC de alto rendimiento. Experimente la tranquilidad de un techo que protege con eficacia, resiste el paso del tiempo y conserva un aspecto impecable sin el esfuerzo del mantenimiento tradicional. Su hogar merece lo mejor: una estética que perdura y una protección superior.</p>

            <div class="features-button-container">
                <!-- Botón para mostrar características -->
                <button id="features-btn" class="features-button">Características</button>
                <!-- Nuevo botón para mostrar el visor 3D -->
                <button id="show-3d-btn" class="features-button">3D</button>
                <!-- Botón para Medidas -->
                <button id="measures-btn" class="features-button">MEDIDAS</button>
                <!-- Botón de ejemplo para Instalación -->
                <button id="install-btn" class="features-button">INSTALACIÓN</button>
            </div>
        </div>
    </div>

    <!-- Ventana Modal para el Visor 3D (inicialmente oculta) -->
    <div id="modal-3d" class="modal-overlay">
        <div class="modal-content modal-3d">
            <button id="modal-close" class="modal-close-btn">&times;</button>
            <!-- El visor 3D ahora vive aquí dentro -->
            <model-viewer id="main-viewer" src="teja.glb" alt="Un modelo 3D de una teja" camera-controls auto-rotate exposure="1.2" reveal="manual"></model-viewer>
        </div>
    </div>

    <!-- Ventana Modal para Características (inicialmente oculta) -->
    <div id="features-modal" class="modal-overlay">
        <div class="modal-content modal-features">
            <button id="features-close-btn" class="modal-close-btn">&times;</button>
            <h2>Características Principales</h2>
            <ul class="features-list karaoke-text">
                <li class="animate-text"><strong>Ligereza:</strong> Son mucho más livianas que las tejas tradicionales, lo que facilita su instalación y reduce la carga sobre la estructura del techo.</li>
                <li class="animate-text" style="animation-delay: 1s;"><strong>Resistencia:</strong> Protegen eficazmente contra impactos, corrosión y rayos UV.</li>
                <li class="animate-text" style="animation-delay: 2s;"><strong>Aislamiento:</strong> Ofrecen aislamiento térmico y acústico, mejorando la eficiencia energética de su hogar.</li>
                <li class="animate-text" style="animation-delay: 3s;"><strong>Durabilidad:</strong> Su vida útil puede superar los 20 años, y algunos modelos garantizan la estabilidad del color por más de una década.</li>
                <li class="animate-text" style="animation-delay: 4s;"><strong>Bajo Mantenimiento:</strong> Su superficie repele la suciedad y no requiere cuidados especiales.</li>
                <li class="animate-text" style="animation-delay: 5s;"><strong>Impermeabilidad Total:</strong> Son completamente impermeables, evitando filtraciones de humedad.</li>
                <li class="animate-text" style="animation-delay: 6s;"><strong>Instalación Sencilla:</strong> Su manejo es fácil y pueden ser instaladas sobre estructuras de madera o metal.</li>
            </ul>
        </div>
    </div>

    <!-- Ventana Modal para Medidas (inicialmente oculta) -->
    <div id="measures-modal" class="modal-overlay">
        <div class="modal-content modal-features">
            <button id="measures-close-btn" class="modal-close-btn">&times;</button>
            <h2>Medidas Disponibles</h2>
            <p class="animate-text">Nuestras tejas se ofrecen en una variedad de longitudes para adaptarse a diferentes necesidades de construcción y minimizar los cortes y desperdicios:</p>
            <ul class="measures-list karaoke-text">
                <li class="animate-text" style="animation-delay: 1.5s;">6.104 metros</li>
                <li class="animate-text" style="animation-delay: 1.8s;">5.01 metros</li>
                <li class="animate-text" style="animation-delay: 2.1s;">4.14 metros</li>
                <li class="animate-text" style="animation-delay: 2.4s;">3.70 metros (medida aproximada)</li>
                <li class="animate-text" style="animation-delay: 2.7s;">3.05 metros</li>
                <li class="animate-text" style="animation-delay: 3.0s;">2.40 metros</li>
            </ul>
            <p class="animate-text" style="animation-delay: 3.5s;"><strong>Nota:</strong> Todas las planchas tienen un ancho total de 1.05 metros y un espesor de 2.5 mm. El ancho útil es de aproximadamente 0.96 metros, después de considerar el solape para la instalación.</p>
        </div>
    </div>

    <script>
        // Función genérica para controlar los modales
        function setupModal(buttonId, modalId, closeButtonId) {
            const modelViewer = document.querySelector('#main-viewer'); // Seleccionamos el visor 3D
            const openButton = document.getElementById(buttonId);
            const modal = document.getElementById(modalId);
            const closeButton = document.getElementById(closeButtonId);

            // Abrir el modal
            openButton.addEventListener('click', () => {
                // Hacemos visible el modal
                modal.classList.add('visible');

                // Buscamos todos los textos animables dentro de ESTE modal y les damos la clase
                modal.querySelectorAll('.karaoke-text').forEach(el => {
                    el.classList.add('animate-text');
                });

                // --- ¡ESTA ES LA PARTE CLAVE! ---
                // Si estamos abriendo el modal 3D, le decimos al visor que se muestre.
                if (modal.id === 'modal-3d' && modelViewer) {
                    // Esto activa la carga y renderizado del modelo.
                    modelViewer.dismissPoster();
                }
            });

            const closeModal = () => {
                modal.classList.remove('visible');

                // Al cerrar, quitamos la clase de animación para que pueda volver a ejecutarse
                modal.querySelectorAll('.karaoke-text').forEach(el => {
                    el.classList.remove('animate-text');
                });

                if (modal.id === 'modal-3d' && modelViewer) {
                    modelViewer.showPoster();
                }
            });

            // Solo añadir los listeners para cerrar si el botón de cierre existe
            if (closeButton) {
                // Cerrar el modal con el botón 'X'
                closeButton.addEventListener('click', () => {
                    closeModal();
                });
            }

            // Cerrar el modal al hacer clic en el fondo oscuro
            modal.addEventListener('click', (event) => {
                if (event.target === modal) {
                    closeModal();
                }
            });
        }

        // Configurar el modal de Características
        setupModal('features-btn', 'features-modal', 'features-close-btn');

        // Configurar el modal 3D
        setupModal('show-3d-btn', 'modal-3d', 'modal-close');

        // Configurar el modal de Medidas
        setupModal('measures-btn', 'measures-modal', 'measures-close-btn');

        // Configurar el modal de Instalación (actualmente no hace nada)
        // setupModal('install-btn', 'install-modal', 'install-close-btn');
    </script>
</body>
</html>
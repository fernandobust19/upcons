<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Teja Española PVC - Upcons</title>
    <link rel="icon" href="logo.png" type="image/png">

    <!-- Carga el componente <model-viewer> de Google -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.5.0/model-viewer.min.js"></script>
    <!-- Carga de Google Fonts (Orbitron) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Orbitron:wght@400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

    <style>
        html, body {
            font-family: sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden; /* Evita scroll horizontal */
            box-sizing: border-box;
            width: 100%;
            max-width: 100vw; /* No exceder el ancho de la ventana */
        }
        
        *, *::before, *::after {
            box-sizing: border-box; /* Asegura que padding y border se incluyan en el ancho */
        }

        /* --- Estilos para el Header y Título Principal --- */
        .page-header {
            text-align: center;
            padding: 15px 0;
            background: linear-gradient(to bottom, #e0f7fa 0%, #ffffff 100%); /* Degradado azul sutil */
        }

        /* Nuevo contenedor para el título que ocupa todo el ancho */
        .title-bar {
            background: linear-gradient(90deg, #1e3c72, #2a5298); /* Gradiente azul oscuro */
            padding: 15px 20px; /* Padding vertical reducido */
            text-align: center;
            position: relative;
            overflow: hidden; /* Para contener el efecto de luz */
            margin-bottom: 25px; /* Margen inferior reducido */
        }

        .main-title {
            font-family: 'Orbitron', sans-serif; /* Fuente tecnológica */
            font-size: 2rem; /* Tamaño de fuente reducido */
            margin: 0;
            font-weight: 700;
            letter-spacing: 4px;
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5), 0 0 20px rgba(0, 242, 255, 0.5);
            position: relative; /* Para que el efecto de luz pase por detrás */
            z-index: 1;
        }

        /* Efecto de barrido de luz "IA" */
        .title-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: -150%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.25), transparent);
            transform: skewX(-25deg);
            animation: light-sweep-ai 6s linear infinite;
            z-index: 0;
        }

        .header-logo {
            height: 80px; /* Altura del logo */
            width: auto;
            display: block;
            margin: 0 auto;
        }


        @keyframes light-sweep-ai {
            0% {
                left: -150%;
            }
            50% {
                left: 150%;
            }
            100% {
                left: 150%;
            }
        }

        /* --- Estilos Responsivos para Móviles --- */
        @media (max-width: 768px) {
            .main-container {
                flex-direction: column; /* Apila los elementos principales verticalmente */
                padding: 0 10px; /* Padding más pequeño en móviles */
            }

            .main-title {
                font-size: 1.5rem; /* Tamaño más pequeño para móviles */
                letter-spacing: 2px; /* Menos espaciado para móviles */
            }
            
            /* Reorganizar el layout imagen-botones en móviles */
            .image-buttons-wrapper {
                flex-direction: row; /* Mantiene imagen y botones en paralelo */
                gap: 15px;
                min-width: 0; /* Permitir que se encoja */
                width: 100%; /* Ocupa todo el ancho para que el texto se vaya abajo */
            }
            
            /* Botones en fila horizontal en móviles */
            .features-button-container {
                flex-direction: row; /* Botones horizontales */
                flex-wrap: wrap; /* Permite que se envuelvan */
                justify-content: center; /* Centrar botones */
                gap: 8px; /* Espacio más pequeño */
                max-width: 100%; /* Usar todo el ancho disponible */
                order: 2; /* Los botones van después de la imagen */
            }

            .price-list {
                grid-template-columns: 1fr; /* Una sola columna en móviles */
            }

            .measures-layout {
                flex-direction: column; /* Apila el texto y la galería en móviles */
                gap: 15px;
            }
            
            /* Adjust content panel height for mobile */
            .main-container {
                gap: 15px; /* Gap más pequeño en tablet */
                padding: 0 10px; /* Padding más pequeño */
            }
            
            .image-buttons-wrapper {
                gap: 10px; /* Gap más pequeño para botones */
                min-width: 0; /* Sin restricción en tablet */
            }
            
            .image-container {
                height: 400px; /* Altura ajustada para tablet con 3 imágenes */
                min-width: 0; /* Permitir que se encoja */
                flex: 1; /* Ocupa el espacio restante */
                order: 1; /* La imagen va primero */
                padding: 12px; /* Padding reducido */
            }
            
            /* Ajustes para las dos imágenes en tablet */
            .dual-image.top {
                height: calc(50% - 5px); /* Mantener 50% cada una */
                width: 75%; /* teja.png más grande en tablet */
            }
            
            .dual-image.bottom {
                height: calc(50% - 5px); /* Mantener 50% cada una */
                width: 50%; /* fondo1.jpg mismo tamaño en tablet */
            }
            
            /* Título responsive en tablet */
            .image-title {
                font-size: 12px;
                margin-top: 6px;
            }
            
            .content-panel {
                height: 350px; /* Altura ajustada para tablet */
            }
            
            .text-container {
                min-width: 0; /* Permitir que se encoja completamente */
                max-width: 100%; /* Usar todo el ancho disponible */
                flex-basis: 100%; /* Asegura que ocupe toda una fila y se vaya abajo */
            }

            /* Botones más pequeños en tablet */
            .features-button {
                width: 50px; /* Tamaño intermedio */
                height: 50px; /* Tamaño intermedio */
                font-size: 8px; /* Texto un poco más grande */
            }
            
            /* Remover restricción de ancho del contenedor de botones */
            .features-button-container {
                width: auto; /* Ancho automático */
                gap: 6px; /* Gap más pequeño */
            }
        }

        /* Media query adicional para pantallas muy pequeñas */
        @media (max-width: 480px) {
            .main-container {
                padding: 0 5px; /* Padding pequeño para móviles */
                gap: 10px; /* Gap pequeño */
                min-width: 280px; /* Ancho mínimo conservador */
            }
            
            .image-buttons-wrapper {
                gap: 8px; /* Gap pequeño para móviles */
                min-width: 0; /* Sin restricción en móviles */
            }
            
            .image-container {
                height: 320px; /* Altura un poco más grande para acomodar 3 imágenes */
                min-width: 0;
                padding: 8px; /* Padding reducido */
            }
            
            /* Ajustes para las dos imágenes en móviles */
            .images-stack {
                gap: 8px; /* Gap ajustado para móviles */
            }
            
            .dual-image.top {
                height: calc(50% - 4px); /* 50% cada una con gap más pequeño */
                width: 70%; /* teja.png más grande en móvil */
            }
            
            .dual-image.bottom {
                height: calc(50% - 4px); /* 50% cada una con gap más pequeño */
                width: 50%; /* fondo1.jpg mismo tamaño en móvil */
            }
            
            /* Título responsive en móvil */
            .image-title {
                font-size: 10px;
                margin-top: 4px;
                letter-spacing: 0.5px;
            }
            
            .content-panel {
                height: 280px; /* Altura ajustada para pantallas muy pequeñas */
                padding-right: 3px; /* Padding más pequeño para scroll */
            }
            
            .text-container {
                min-width: 0; /* Sin restricción de ancho mínimo */
                padding: 0 5px; /* Padding pequeño */
            }
            
            /* Botones en móviles */
            .features-button {
                width: 48px; /* Un poco más grandes que antes */
                height: 48px; /* Un poco más grandes que antes */
                font-size: 7px; /* Texto legible */
                padding: 3px; /* Padding ajustado */
            }
            
            /* Título más pequeño en móviles */
            .main-title {
                font-size: 1rem; /* Aún más pequeño */
                letter-spacing: 1px;
                padding: 5px 10px; /* Padding más pequeño */
            }
            
            /* Reducir gap entre botones */
            .features-button-container {
                gap: 6px; /* Gap un poco más grande para botones más grandes */
                padding: 0; /* Sin padding */
            }
            
            /* Header más compacto */
            .page-header {
                padding: 10px 5px; /* Padding más pequeño */
            }
            
            .header-logo {
                height: 60px; /* Logo más pequeño */
            }
        }

        /* Contenedor principal que usa Flexbox para el diseño */
        .main-container {
            display: flex;
            flex-wrap: wrap; /* Permite que los elementos se apilen en pantallas pequeñas */
            gap: 20px; /* Espacio original */
            align-items: flex-start; /* Alinea los items al inicio */
            padding: 0 15px; /* Padding original */
            min-width: 280px; /* Ancho mínimo original */
            max-width: 1400px; /* Ancho máximo original */
            margin: 0 auto; /* Centrar el contenedor */
        }
        
        /* Contenedor que agrupa la imagen y los botones */
        .image-buttons-wrapper {
            display: flex;
            gap: 12px; /* Gap original para que los botones no se salgan */
            align-items: flex-start;
            flex: 1;
            min-width: 250px; /* Ancho mínimo original */
        }
        /* Contenedor para la imagen estática */
        .image-container {
            flex: 2; /* Aún más espacio aprovechando botones en el borde */
            min-width: 240px; /* Ancho mínimo un poco más grande */
            max-width: 68%; /* Máximo más grande sin exceder la pantalla */
            /* Estilos para el área de contenido dinámico */
            position: relative;
            height: 380px; /* Altura ajustada para coincidir con los 6 botones (6*55px + 5*10px gap) */
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 12px;
            overflow: hidden; /* El scroll lo manejan los content-panels individuales */
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.05);
        }

        /* Paneles de contenido que se mostrarán/ocultarán */
        .content-panel {
            display: none; /* Ocultos por defecto */
            width: 100%;
            height: 350px; /* Altura ajustada (380px del contenedor - 30px de padding) */
            overflow-y: auto; /* Scroll vertical cuando sea necesario */
            padding-right: 5px; /* Espacio para la barra de scroll */
        }

        .content-panel.active {
            display: block; /* El panel activo se muestra */
        }

        /* Personalización de la barra de scroll para todos los paneles */
        .content-panel::-webkit-scrollbar {
            width: 6px;
        }

        .content-panel::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        .content-panel::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }

        .content-panel::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

        /* Asegurar que todos los elementos dentro de los paneles respeten el contenedor */
        .content-panel > * {
            max-width: 100%;
            box-sizing: border-box;
        }

        /* Espaciado uniforme para listas dentro de los paneles */
        .content-panel .measures-list,
        .content-panel .features-list {
            margin: 0;
            padding: 0;
        }

        /* Asegurar que las imágenes dentro de los paneles no rompan el layout */
        .content-panel img {
            max-width: 100%;
            height: auto;
        }
        /* Asegurar que los elementos principales dentro de los paneles ocupen la altura completa */
        .content-panel > .static-image,
        .content-panel > model-viewer,
        .content-panel > .measures-layout {
            height: 100%;
            object-fit: contain; /* Muestra la imagen completa sin recortar */
        }
        .static-image, .modal-image {
            width: 95%; /* Reducir un poco el ancho para alejar la imagen */
            height: auto;
            border-radius: 12px;
            object-fit: contain; /* Muestra la imagen completa sin recortar */
            margin: 10px auto; /* Centrar y agregar margen para alejar */
            display: block; /* Para que el margin auto funcione */
        }

        /* Contenedor para las dos imágenes */
        .images-stack {
            display: flex;
            flex-direction: column;
            height: 100%;
            gap: 10px; /* Espacio entre las dos imágenes */
        }

        /* Configuración base para ambas imágenes */
        .dual-image {
            flex: 1; /* Mismo espacio para ambas */
            height: calc(50% - 5px); /* 50% del contenedor menos el gap */
            object-fit: contain; /* Muestra la imagen completa sin recortar */
            border-radius: 12px;
            margin: 0 auto; /* Centrar horizontalmente */
            display: block;
        }
        
        /* Ambas imágenes del mismo tamaño más pequeño */
        .dual-image.top {
            width: 80%; /* teja.png más grande */
        }
        
        /* fondo1.jpg del mismo tamaño */
        .dual-image.bottom {
            width: 50%; /* fondo1.jpg mismo tamaño */
        }

        .dual-image.top {
            margin-bottom: 5px;
        }

        .dual-image.bottom {
            margin-top: 5px;
        }

        /* Contenedor para imagen con título */
        .image-with-title {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
        }

        /* Título debajo de la imagen */
        .image-title {
            color: #2c5aa0;
            font-family: 'Orbitron', sans-serif;
            font-size: 14px;
            font-weight: bold;
            text-align: center;
            margin-top: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        /* Contenedor para el texto */
        .text-container {
            flex: 1; /* Proporción ajustada */
            min-width: 300px; /* Ancho mínimo para evitar que se comprima demasiado */
            max-width: 400px; /* Máximo para mantener proporciones */
        }
        .text-container h1 {
            font-family: 'Lato', sans-serif; /* Fuente más moderna y atractiva */
            font-size: 1.4rem; /* Tamaño ajustado */
            font-weight: 700; /* Poner en negrilla */
            color: #6a4a9c; /* Un morado elegante y más sutil */
            margin-bottom: 15px;
            line-height: 1.3;
            /* Efecto 3D con sombra y luz */
            text-shadow: 
                0px 1px 1px rgba(0,0,0,0.2), /* Sombra sutil inferior */
                0px 2px 2px rgba(0,0,0,0.15), /* Sombra más profunda */
                0px 3px 3px rgba(0,0,0,0.1), /* Sombra aún más profunda */
                0 0 5px rgba(255, 255, 255, 0.5); /* Brillo de luz */
        }
        .text-container p {
            font-family: 'Lato', sans-serif; /* Fuente más elegante y legible */
            font-size: 1rem; /* Tamaño reducido */
            line-height: 1.6; /* Espacio entre líneas ajustado */
            color: #444; /* Un gris oscuro que es más suave que el negro puro */
            text-align: justify; /* Alineación justificada */
        }
        /* Estilos para el visor del modelo (ahora en el modal) */
        model-viewer {
            width: 100%;
            height: 100%; /* Altura completa para llenar el panel */
            --poster-color: transparent; /* Fondo transparente mientras carga */
            /* Estilo para la barra de progreso */
            --progress-bar-color: #00f2ff;
            --progress-mask: transparent; /* Oculta la barra de progreso por defecto */
            border-radius: 12px;
        }

        /* --- Estilos para el Overlay de Carga del 3D --- */
        .loading-overlay {
            /* Ajustado para el nuevo contenedor */
            position: relative;
            height: 420px;
            background-color: #f8f9fa;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .loading-overlay.hide {
            display: none; /* Oculta completamente el elemento */
            pointer-events: none; /* ¡Esta es la clave! Ignora los clics en el overlay oculto */
        }

        .loading-percentage {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem; /* Tamaño más pequeño */
            color: #8a2be2;
            font-weight: bold;
        }

        /* --- Estilos para el botón y el panel de características --- */

        /* Contenedor para los botones, ahora en columna al lado de la imagen */
        .features-button-container {
            display: flex;
            flex-direction: column; /* Apila los botones verticalmente */
            gap: 10px; /* Espacio un poco más grande */
            flex-shrink: 0; /* Evita que el contenedor de botones se encoja */
            width: 65px; /* Ancho reducido para botones más pequeños */
            justify-content: flex-start;
            margin-left: auto; /* Empuja los botones hacia la derecha */
            margin-right: 5px; /* Pequeño margen para no tocar el borde */
            align-items: center;
        }

        /* Estilo del botón de características */
        .features-button {
            position: relative;
            width: 55px; /* Tamaño más pequeño */
            height: 55px; /* Tamaño más pequeño */
            border-radius: 50%;
            border: none;
            padding: 5px; /* Pequeño padding para evitar que el texto toque los bordes */
            display: flex; /* Para centrar el texto vertical y horizontalmente */
            align-items: center;
            justify-content: center;
            text-align: center;
            background: linear-gradient(45deg, #00bfa5, #01579b); /* Gradiente elegante de verde-azulado a azul oscuro */
            color: white;
            font-size: 7px; /* Fuente más pequeña */
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s ease;
            animation: pulse-glow-smart 4s infinite ease-in-out;
            /* --- Evita el recuadro de selección en móviles --- */
            -webkit-touch-callout: none; /* iOS Safari */
            -webkit-user-select: none;   /* Safari */
            -khtml-user-select: none;    /* Konqueror HTML */
            -moz-user-select: none;      /* Old versions of Firefox */
            -ms-user-select: none;       /* Internet Explorer/Edge */
            -webkit-tap-highlight-color: transparent; /* Evita el resaltado azul en móviles */
            user-select: none;           /* Standard */
        }

        /* Animación de pulso para el brillo del botón */
        @keyframes pulse-glow-smart {
            0%, 100% {
                box-shadow: 0 0 20px 3px rgba(0, 191, 165, 0.6);
            }
            50% {
                box-shadow: 0 0 30px 8px rgba(1, 87, 155, 0.6);
            }
        }

        .features-button:hover {
            transform: scale(1.05);
        }

        /* Elimina el recuadro azul al hacer foco */
        .features-button:focus {
            outline: none;
        }

        /* Estilo para el botón activo */
        .features-button.active {
            background: linear-gradient(45deg, #8a2be2, #6a4a9c); /* Gradiente morado para el activo */
            animation: none; /* Pausa la animación de pulso cuando está activo */
            box-shadow: 0 0 15px rgba(138, 43, 226, 0.7);
        }

        /* Triángulo indicador para el botón activo */
        .features-button.active::after {
            content: '';
            position: absolute;
            top: 50%;
            /* Apunta hacia la izquierda (hacia el contenido) */
            left: -10px; 
            transform: translateY(-50%);
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            border-right: 10px solid #793dbb; /* Color que coincide con el gradiente */
        }

        /* --- Estilos para Subtítulos Elegantes en Modales --- */
        .content-panel h2 {
            position: relative; /* Necesario para el efecto de luz */
            font-family: 'Playfair Display', serif;
            text-align: center; 
            font-size: 1.5rem; /* Título más pequeño para el nuevo contenedor */
            color: #fff; /* Texto blanco para contraste */
            /* Nuevo fondo oscuro y elegante */
            background: radial-gradient(ellipse at center, #333 0%, #111 100%);
            padding: 15px 20px;
            border-radius: 8px;
            overflow: hidden; /* Oculta el pseudo-elemento fuera del título */
            margin-bottom: 15px; /* Margen reducido */
        }

        /* Pseudo-elemento para el título */
        .content-panel h2::before {
            content: '';
            position: absolute;
            top: -50%;
            left: 0;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(0, 191, 165, 0.2), transparent, rgba(1, 87, 155, 0.2), transparent);
            animation: aurora-sweep 8s linear infinite;
        }

        /* Animación de la luz "aurora" */
        @keyframes aurora-sweep {
            from {
                transform: translateX(-50%) rotate(0deg);
            }
            to {
                transform: translateX(0) rotate(360deg);
            }
        }

        .modal-image {
            float: right; /* Flota la imagen a la derecha */
            width: 35%; /* Ancho reducido */
            min-width: 100px; /* Ancho mínimo para evitar que se colapse */
            max-width: 120px; /* Ancho máximo reducido */
            margin-left: 15px; /* Espacio a la izquierda de la imagen */
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); /* Sombra sutil */
        }

        /* Estilos para la lista de medidas en el modal */
        .measures-list {
            list-style-type: none;
            padding: 0;
        }
        .measures-list li {
            background-color: #f0f0f0;
            padding: 8px; /* Padding reducido */
            margin-bottom: 8px;
            border-radius: 5px;
            border-left: 4px solid #8a2be2;
        }
        
        #measures-content .measures-list li {
            font-size: 0.9rem; /* Letra más pequeña para las medidas */
            padding: 6px 8px;
        }

        /* Estilos para la lista de medidas en dos líneas */
        #measures-content .measures-list li {
            display: flex;
            flex-direction: column;
        }
        #measures-content .measures-list span {
            display: block; /* Hace que el título ocupe su propia línea */
            margin-bottom: 2px; /* Pequeño espacio entre título y medida */
        }
        #measures-content .measures-list small {
            font-weight: bold;
            color: #555;
        }

        /* Estilos específicos para el panel de instalación */
        #install-content p, #install-content .measures-list li {
            font-size: 0.9rem; /* Fuente más pequeña para el texto de instalación */
            line-height: 1.5;
        }

        /* Estilos para el panel de accesorios para texto más pequeño */
        #accessories-content p {
            font-size: 0.85rem; /* Fuente más pequeña */
            line-height: 1.4;
            margin-bottom: 8px;
        }
        #accessories-content h5 {
            font-size: 0.95rem; /* Título un poco más grande que el párrafo */
            margin-top: 12px;
            margin-bottom: 4px;
        }

        /* Quita la línea vertical solo en la lista de garantía */
        #warranty-content .measures-list li {
            border-left: none;
            padding-left: 8px; /* Mantiene un padding consistente */
            font-size: 0.8rem; /* Fuente más pequeña para el texto de garantía */
            line-height: 1.4; /* Interlineado ajustado */
        }
        #warranty-content .measures-list ul {
            padding-left: 15px; /* Indentación para las sub-listas */
            margin-top: 5px;
        }

        /* Estilos para las imágenes de accesorios */
        .accessory-image {
            width: 100%;
            max-width: 250px;
            height: auto;
            border-radius: 8px;
            margin: 10px 0;
        }

        /* --- Estilos para el layout del modal de medidas --- */
        .measures-layout {
            display: flex;
            flex-wrap: wrap; /* Para que se apile en pantallas pequeñas */
            gap: 20px;
            align-items: flex-start;
        }

        .measures-text {
            flex: 2; /* Ocupa más espacio */
        }

        .measures-gallery {
            flex: 1;
            min-width: 150px; /* Ancho mínimo reducido */
            position: relative;
            height: 350px; /* Altura reducida para un carrusel más pequeño */
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .gallery-inner {
            /* Contenedor que se animará verticalmente */
            animation: vertical-scroll 15s linear infinite;
        }

        .measures-gallery .gallery-image {
            display: block;
            width: 100%;
            height: auto;
            object-fit: cover;
            margin-bottom: 10px;
        }

        @keyframes vertical-scroll {
            from { transform: translateY(0); }
            to { transform: translateY(-50%); }
        }

        /* Estilos para la lista de características */
        .features-list {
            display: grid; /* Usamos grid para un diseño de tarjetas moderno */
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); /* Ancho mínimo reducido para más flexibilidad */
            gap: 8px; /* Espacio más reducido entre tarjetas */
            list-style-type: none;
            padding: 0;
        }
        .features-list li {
            background-color: #f8f9fa; /* Fondo suave para la tarjeta */
            padding: 8px; /* Padding aún más reducido */
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            font-family: 'Lato', sans-serif;
        }
        .features-list li::before {
            /* Iconos eliminados según solicitud del usuario */
            content: ''; /* Sin icono */
            display: none; /* Ocultar completamente */
        }
        .features-list strong {
            display: block; /* El título en su propia línea */
            font-size: 1rem; /* Fuente más pequeña */
            color: #333;
            margin-bottom: 4px; /* Margen más reducido */
            font-weight: bold;
        }
        .features-list p { /* Estilo para el texto descriptivo */
            margin: 0;
            line-height: 1.4; /* Interlineado reducido */
            color: #555;
            font-size: 0.85rem; /* Fuente aún más pequeña */
        }

        /* Estilo para resaltar texto importante en los modales */
        .content-panel strong {
            background-color: #f0e6ff; /* Fondo lila muy claro */
            color: #6a4a9c; /* Color morado del tema */
            padding: 2px 5px;
            border-radius: 4px;
            font-weight: 700;
        }

        /* --- Estilos para la animación de aparición de texto --- */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .reveal-item {
            opacity: 0; /* Inicia invisible */
        }

        .reveal-item.animate {
            animation: fadeInUp 0.6s ease-out forwards;
        }

        /* --- Estilos para la sección de video --- */
        .video-section {
            /* Se centra el contenedor del video y se le da un ancho máximo */
            max-width: 300px; /* Ancho aún más reducido para disminuir la altura */
            margin: 0 auto 40px auto; /* Centra el contenedor y añade margen inferior */
            padding: 0 20px; /* Mantiene un espaciado si la pantalla es muy pequeña */
            box-sizing: border-box;
        }

        .video-section video {
            width: 100%;
            height: auto;
            border-radius: 15px;
            display: block; /* Para evitar espacios extra debajo del video */
        }

        /* --- Estilos para la sección de texto de convencimiento --- */
        .conviction-section {
            padding: 40px 20px;
            background-color: #ffffff;
            text-align: center;
        }

        .conviction-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .conviction-content h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            color: #8a2be2; /* Color principal */
            margin-bottom: 15px;
        }

        .conviction-content p {
            font-family: 'Lato', sans-serif;
            font-size: 1.1rem;
            color: #333;
            line-height: 1.7;
        }
        /* --- Nuevos Estilos para la Lista de Precios --- */
        .pricing-section {
            padding: 40px 20px;
            background-color: #f9f9f9; /* Un fondo suave para la sección */
        }

        .section-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            margin-bottom: 30px;
            text-align: center;
            color: #333;
        }

        .price-list {
            max-width: 800px;
            margin: 0 auto;
            list-style: none;
            padding: 0;
            display: grid;
            grid-template-columns: 1fr; /* Cambiado a una sola columna */
            gap: 15px;
        }

        .price-item {
            display: flex;
            align-items: center;
            gap: 15px; /* Espacio reducido */
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            padding: 10px 15px; /* Padding reducido */
            margin-bottom: 15px;
            transition: box-shadow 0.2s ease; /* Solo transicionará la sombra */
        }

        .price-item:hover {
            /* Se elimina el efecto de movimiento */
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
        }

        .price-item-image {
            width: 60px; /* Imagen más pequeña */
            height: 60px; /* Imagen más pequeña */
            object-fit: cover;
            border-radius: 10px;
        }

        .price-item-info {
            flex-grow: 1;
        }

        .price-item-info h4 {
            margin: 0 0 5px 0;
            font-size: 0.9rem; /* Fuente más pequeña */
        }

        .price-item-info p {
            margin: 0;
            color: #555;
            font-size: 0.8rem; /* Fuente más pequeña */
        }

        .price-item-value {
            font-size: 1.2rem; /* Fuente de precio más pequeña */
            font-weight: bold;
            color: #8a2be2;
        }

        /* Contenedor para el botón de WhatsApp y el ícono externo */
        .whatsapp-cta-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px; /* Espacio entre el botón y el ícono */
            margin-top: 40px;
        }

        .whatsapp-icon {
            width: 60px; /* Tamaño del nuevo ícono */
            height: auto;
            transition: transform 0.3s ease;
        }

        .whatsapp-icon:hover {
            transform: scale(1.1);
        }

        .cta-button {
            /* Ajustes al botón existente */
            padding: 15px 25px;
            background: linear-gradient(45deg, #25D366, #128C7E); /* Colores de WhatsApp */
            color: white;
            text-align: center;
            text-decoration: none;
            font-weight: bold;
            border-radius: 8px;
            transition: background 0.3s ease;
        }

        .cta-button:hover {
            background: linear-gradient(45deg, #128C7E, #25D366); /* Invierte el gradiente en hover */
        }

        /* --- Estilos para la Tarjeta --- */
        .tarjeta-container {
            width: 100%;
            margin: 20px 0;
            padding: 0;
        }

        .tarjeta-image {
            width: 100%;
            height: auto;
            display: block;
            max-width: 100%;
            object-fit: cover;
        }

        /* --- Estilos para el Pie de Página (Footer) --- */
        .site-footer {
            background-color: #2c2c2c;
            color: #ccc;
            padding: 40px 20px;
            text-align: center;
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .footer-content h3 {
            font-family: 'Orbitron', sans-serif;
            color: #fff;
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .footer-content p {
            margin: 0 0 25px 0;
            color: #aaa;
            font-size: 1rem;
            line-height: 1.6;
        }

        .footer-locations {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .location-links a {
            background-color: #444;
            color: #fff;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        .location-links a:hover {
            background-color: #8a2be2;
        }

        .location-item {
            margin-bottom: 20px;
        }

        .location-item h4 {
            color: #fff;
            margin: 0 0 5px 0;
        }

        .location-item p {
            margin: 0 0 10px 0;
            font-size: 0.9rem;
        }

        .location-item a {
            display: inline-flex; /* Para alinear ícono y texto */
            align-items: center;
            gap: 8px; /* Espacio entre ícono y texto */
            background-color: #4285F4; /* Color azul de Google */
            color: #fff; /* Texto blanco para mejor contraste */
            padding: 8px 15px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        .footer-bottom {
            border-top: 1px solid #444;
            padding-top: 10px; /* Padding reducido */
            font-size: 5px; /* Tamaño bien pequeño */
            color: #777;
            line-height: 1.1; /* Espaciado entre líneas más compacto */
        }
        
        .footer-bottom p {
            margin: 1px 0; /* Margen muy mínimo entre párrafos */
        }
        
        .location-button {
            background: #00cc00; /* Verde más oscuro */
            color: #fff; /* Texto blanco en negrilla */
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
            margin-top: 15px;
            margin-bottom: 20px;
            box-shadow: 0 0 20px rgba(0, 204, 0, 0.6); /* Efecto de brillo verde más oscuro */
        }
        
        .location-button:hover {
            background: #00aa00; /* Verde aún más oscuro en hover */
            transform: translateY(-2px);
            box-shadow: 0 0 30px rgba(0, 204, 0, 0.8); /* Más brillo en hover */
        }

        .floating-bot-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: transparent;
            border-radius: 50%;
            width: 72px;
            height: 72px;
            padding: 0;
            border: none;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.35);
            z-index: 3000; /* Sobre todo lo demas */
            transition: transform 0.25s ease, box-shadow 0.25s ease;
            cursor: pointer;
            overflow: hidden;
            touch-action: none; /* Permite arrastrar con dedo */
            user-select: none;
        }

        .floating-bot-button.dragging {
            transition: none;
            box-shadow: 0 16px 28px rgba(0, 0, 0, 0.25);
        }

        .floating-bot-button:hover {
            transform: translateY(-3px) scale(1.03);
            box-shadow: 0 18px 35px rgba(0, 0, 0, 0.35);
        }

        .floating-bot-button:focus-visible {
            outline: 3px solid rgba(255, 255, 255, 0.85);
            outline-offset: 4px;
        }

        .floating-bot-button img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
            display: block;
        }

        /* --- Estilos para la ventana flotante del bot --- */
        .bot-chat-panel {
            position: fixed;
            bottom: 25px;
            right: 20px;
            width: 340px;
            max-width: calc(100vw - 30px);
            height: min(520px, calc(100vh - 70px));
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 20px 60px rgba(15, 15, 15, 0.35);
            overflow: hidden;
            transform: translateY(20px);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease, transform 0.3s ease;
            z-index: 2500;
            display: flex;
            flex-direction: column;
        }

        .bot-chat-panel.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }

        .bot-chat-header {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: #fff;
            padding: 10px 14px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
        }

        .bot-chat-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .bot-chat-info img {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.35);
        }

        .bot-chat-info strong {
            display: block;
            font-size: 0.95rem;
            line-height: 1.1;
        }

        .bot-chat-info span {
            font-size: 0.75rem;
            opacity: 0.8;
        }

        .bot-chat-actions button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: #fff;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s ease;
        }

        .bot-chat-actions button:hover,
        .bot-chat-actions button:focus-visible {
            background: rgba(255, 255, 255, 0.35);
            outline: none;
        }

        #bot-iframe {
            width: 100%;
            height: 100%;
            border: none;
            flex: 1;
            min-height: 0;
        }

        @media (max-width: 600px) {
            .floating-bot-button {
                bottom: 15px;
                right: 15px;
            }

            .bot-chat-panel {
                width: 88vw;
                max-width: 400px;
                right: 6vw;
                bottom: 10px;
                height: 75vh;
                border-radius: 16px;
            }
        }
    </style>
</head>
<body>
    <header class="page-header">
        <img src="logo.png" alt="Logo Upcons" class="header-logo">
    </header>
    <div class="title-bar">
        <h1 class="main-title">TEJA ESPAÑOLA PVC</h1>
    </div>
    <div class="main-container">
        <div class="image-buttons-wrapper">
            <div class="image-container">
                <!-- Panel inicial con las imágenes -->
                <div id="initial-content" class="content-panel active">
                    <div class="images-stack">
                        <img src="teja.png" alt="Teja española de PVC" class="dual-image top" onerror="this.style.display='none'">
                        <div class="image-with-title">
                            <img src="fondo1.jpg" alt="Imagen de fondo" class="dual-image bottom" onerror="this.style.display='none'">
                            <div class="image-title">FONDO BLANCO</div>
                        </div>
                    </div>
                </div>

                <!-- Panel para Características -->
                <div id="features-content" class="content-panel">
                    <h2>Características</h2>
                    <ul class="features-list">
                        <li><strong>Ligereza</strong><p>Instalación fácil, reduce la carga del techo.</p></li>
                        <li><strong>Resistencia</strong><p>Protege de impactos, corrosión y rayos UV.</p></li>
                        <li><strong>Aislamiento</strong><p>Aísla del calor y del ruido exterior.</p></li>
                        <li><strong>Durabilidad</strong><p>Vida útil superior a los 20 años de servicio.</p></li>
                    </ul>
                </div>

                <!-- Panel para el Visor 3D -->
                <div id="3d-content" class="content-panel">
                    <model-viewer id="main-viewer" src="teja.glb" alt="Un modelo 3D de una teja" camera-controls auto-rotate exposure="1.2" reveal="manual" loading="eager">
                        <div class="loading-overlay" slot="progress-bar"><span class="loading-percentage">Cargando...</span></div>
                    </model-viewer>
                </div>

                <!-- Panel para Medidas -->
                <div id="measures-content" class="content-panel">
                    <div class="measures-layout">
                        <div class="measures-text">
                            <h2>Medidas</h2>
                            <p>Disponibles en varias longitudes para minimizar desperdicios:</p>
                            <ul class="measures-list">
                                <li><span>Teja española</span><small>6.14 m. X 1.05</small></li>
                                <li><span>Teja española</span><small>5.04 m. X 1.05</small></li>
                                <li><span>Teja española</span><small>4.16 m. X 1.05</small></li>
                                <li><span>Teja española</span><small>3.70 m. X 1.05</small></li>
                                <li><span>Teja española</span><small>3.06 m. X 1.05</small></li>
                                <li><span>Teja española</span><small>2.40 m. X 1.05</small></li>
                            </ul>
                        </div>
                        <div class="measures-gallery">
                            <div class="gallery-inner">
                                <!-- Set de imágenes duplicado para bucle infinito -->
                                <img src="t1.png" alt="Vista de teja 1" class="gallery-image">
                                <img src="t2.jpg" alt="Vista de teja 2" class="gallery-image">
                                <img src="t3.jpg" alt="Vista de teja 3" class="gallery-image">
                                <img src="teja.png" alt="Vista de teja 4" class="gallery-image">
                                <img src="t1.png" alt="Vista de teja 1" class="gallery-image">
                                <img src="t2.jpg" alt="Vista de teja 2" class="gallery-image">
                                <img src="t3.jpg" alt="Vista de teja 3" class="gallery-image">
                                <img src="teja.png" alt="Vista de teja 4" class="gallery-image">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Panel para Sistema/Instalación -->
                <div id="install-content" class="content-panel">
                    <h2>Sistema</h2>
                    <img src="instalacion.jpg" alt="Proceso de instalación" class="modal-image">
                    <p>La instalación comienza una vez que la estructura principal está montada. Se centra en el soporte y la fijación de las tejas para proteger el área.</p>
                    <ul class="measures-list">
                        <li><strong>Montaje de correas:</strong> Se instalan correas metálicas sobre las vigas. Estas piezas forman la base para la cubierta.</li>
                        <li><strong>Colocación de tejas:</strong> La instalación empieza en la parte más baja del techo y avanza hacia arriba, superponiendo las piezas para evacuar el agua.</li>
                        <li><strong>Fijación segura:</strong> Cada teja se fija a las correas con tornillos o ganchos, prestando atención al sellado para evitar filtraciones.</li>
                    </ul>
                </div>

                <!-- Panel para Accesorios -->
                <div id="accessories-content" class="content-panel">
                    <h2>Accesorios</h2>
                    <p>Estos elementos son esenciales para sellar la unión de dos planos inclinados del tejado y evitar filtraciones de agua.</p>
                    <img src="3vias.png" alt="Cumbrero 3 vías" class="modal-image"> <!-- Imagen corregida -->
                    
                    <h5>Cumbreros 3 vías</h5>
                    <p>Se utilizan para unir tres faldones del tejado en una esquina, comúnmente en techos con forma de L o en intersecciones.</p>
                    <img src="cumbrero.png" alt="Cumbrero 2 vías" class="modal-image"> <!-- Imagen corregida -->
                    
                    <h5>Cumbrero Principal</h5>
                    <p>Un cumbrero principal, también conocido como caballete o cumbrera, es el elemento de remate que se coloca en la parte más alta de un tejado, en la línea horizontal donde se unen dos planos inclinados. Su función principal es proteger la edificación de la entrada de agua, nieve y otros elementos, asegurando la impermeabilidad y la solidez de la cubierta</p>
                    
                    <img src="pernoteja.jpg" alt="Kit de fijación para tejas" class="modal-image">
                    
                    <h5>Kit de Fijación</h5>
                    <p>Para la instalación de tejas españolas de PVC, la fijación más común es un kit que incluye un tornillo, una arandela de caucho para sellar, y un capuchón que cubre y protege la cabeza del tornillo</p>
                    <div style="clear: both;"></div> <!-- Limpia el float para el siguiente elemento -->
                </div>

                <!-- Panel para Garantía -->
                <div id="warranty-content" class="content-panel">
                    <h2>Garantía</h2>
                    <ul class="measures-list">
                        <li><strong>Duración de la garantía:</strong>
                            <ul>
                                <li>Garantía de integridad: Usualmente oscila entre 10 y 30 años, dependiendo del material (PVC o PVC/ASA).</li>
                                <li>Garantía de color: La retención del color tiene una garantía de 5 a 10 años, especialmente en modelos con ASA.</li>
                            </ul>
                        </li>
                        <li><strong>Alcance de la garantía:</strong>
                            <ul>
                                <li>Cubre defectos de fabricación, asegura resistencia a impactos y corrosión, y protege contra el desgaste prematuro.</li>
                            </ul>
                        </li>
                        <li><strong>Exclusiones y condiciones:</strong>
                            <ul>
                                <li>La garantía puede anularse por instalación incorrecta, daños por desastres naturales o falta de mantenimiento.</li>
                            </ul>
                        </li>
                        <li><strong>Recomendaciones:</strong>
                            <ul><li>Consulte siempre el certificado de garantía y considere que los materiales con recubrimiento ASA ofrecen mejores garantías.</li></ul>
                        </li>
                    </ul>
                </div>

            </div>
            <!-- Contenedor de botones al lado derecho de la imagen -->
            <div class="features-button-container">
                <!-- Botón para mostrar características -->
                <button data-content="features-content" class="features-button">VENTAJAS</button>
                <!-- Nuevo botón para mostrar el visor 3D -->
                <button data-content="3d-content" class="features-button">3D</button>
                <!-- Botón para Medidas -->
                <button data-content="measures-content" class="features-button">MEDIDAS</button>
                <!-- Botón de ejemplo para Instalación -->
                <button data-content="install-content" class="features-button">SISTEMA</button>
                <!-- Nuevos botones -->
                <button data-content="accessories-content" class="features-button">ACCESORIOS</button>
                <button data-content="warranty-content" class="features-button">GARANTIA</button>
            </div>
        </div>
        <div class="text-container">
            <h1>Un Techo con Historia, una Solución del Futuro.</h1>
            <p>La apariencia icónica de la teja española, ahora reinventada en PVC de alto rendimiento. Su hogar merece lo mejor: una estética que perdura y una protección superior.</p>
        </div>
    </div>

    <!-- Sección para el video -->
    <section class="video-section">
        <video src="video.mp4" autoplay muted loop playsinline></video>
    </section>

    <!-- Nueva sección de texto persuasivo -->
    <section class="conviction-section">
        <div class="conviction-content">
            <h2>¿Listo para dar el paso definitivo hacia un techo superior?</h2>
            <p>No es solo una compra, es una inversión en la tranquilidad y el valor de su hogar. Cada teja está diseñada para ofrecer décadas de protección, belleza y rendimiento sin preocupaciones.</p>
        </div>
    </section>

    <section class="pricing-section">
        <h2 class="section-title">PRECIOS DE IMPORTADOR</h2>
        <ul class="price-list">
            <li class="price-item">
                <img src="tejaventa.jpg" alt="Teja PVC" class="price-item-image">
                <div class="price-item-info"><h4>Teja española 6.14 m. X 1.05</h4><p>Fondo Naranja</p></div>
                <div class="price-item-value">$42.90</div>
            </li>
            <li class="price-item">
                <img src="tejaventa.jpg" alt="Teja PVC" class="price-item-image">
                <div class="price-item-info"><h4>Teja española 5.04 m. X 1.05</h4><p>Fondo Naranja</p></div>
                <div class="price-item-value">$35.00</div>
            </li>
            <li class="price-item">
                <img src="tejaventa.jpg" alt="Teja PVC" class="price-item-image">
                <div class="price-item-info"><h4>Teja española 4.16 m. X 1.05</h4><p>Fondo Naranja</p></div>
                <div class="price-item-value">$29.20</div>
            </li>
            <li class="price-item">
                <img src="tejaventa.jpg" alt="Teja PVC" class="price-item-image">
                <div class="price-item-info"><h4>Teja española 3.70 m. X 1.05</h4><p>Fondo Naranja</p></div>
                <div class="price-item-value">$25.90</div>
            </li>
            <li class="price-item">
                <img src="tejaventa.jpg" alt="Teja PVC" class="price-item-image">
                <div class="price-item-info"><h4>Teja española 3.06 m. X 1.05</h4><p>Fondo Naranja</p></div>
                <div class="price-item-value">$21.45</div>
            </li>
            <li class="price-item">
                <img src="tejaventa.jpg" alt="Teja PVC" class="price-item-image">
                <div class="price-item-info"><h4>Teja española 2.40 m. X 1.05</h4><p>Fondo Naranja</p></div>
                <div class="price-item-value">$18.00</div>
            </li>
        </ul>
        <!-- Puedes cambiar el enlace de WhatsApp -->
        <div class="whatsapp-cta-container">
            <a href="https://wa.me/593995986366?text=Porfavor%20necesito%20una%20cotizacion," target="_blank" class="cta-button">
                Cotizar por WhatsApp
            </a>
            <img src="wat.png" alt="Ícono de WhatsApp" class="whatsapp-icon">
        </div>
        
        <!-- Imagen tarjeta de extremo a extremo -->
        <div class="tarjeta-container">
            <img src="tarjeta.png" alt="Tarjeta de presentación" class="tarjeta-image">
        </div>
    </section>

    <footer class="site-footer">
        <div class="footer-content">
            <h3>Nuestras Ubicaciones</h3>
            <div style="text-align: center;">
                <a href="https://fernandobust19.github.io/Map/" target="_blank" class="location-button">Cómo llegar</a>
            </div>
            <div class="footer-locations"> <!-- Contenedor para los items de ubicación -->
                <div class="location-item">
                    <h4>Upcons Sur (La Ecuatoriana)</h4>
                    <p>Av. La Ecuatoriana & Martín Santiago Icaza</p>
                </div>
                <div class="location-item">
                    <h4>Upcons (Mariscal Sucre)</h4>
                    <p>Av. Mariscal Sucre</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Teja Española PVC. Todos los derechos reservados.</p>
                <p>Web: <a href="http://www.conupcons.com" target="_blank" style="color: #4285F4;">www.conupcons.com</a></p>
                <p>Teléfono: <a href="tel:+593995986366" style="color: #4285F4;">0995986366</a></p>
                <p>Email: <a href="mailto:fernando2000b@hotmail.com" style="color: #4285F4;">fernando2000b@hotmail.com</a></p>
            </div>
        </div>
    </footer>

    <!-- Botón flotante del Asistente -->
    <button id="bot-assistant-button" class="floating-bot-button" type="button" aria-controls="bot-panel" aria-expanded="false">
        <img src="asistente.png" alt="Abrir asistente virtual">
    </button>

    <!-- Ventana flotante del Asistente -->
    <div id="bot-panel" class="bot-chat-panel" aria-hidden="true">
        <div class="bot-chat-header">
            <div class="bot-chat-info">
                <img src="logo.png" alt="Upcons Bot">
                <div>
                    <strong>UpconsBot</strong>
                    <span>Listo para ayudarte</span>
                </div>
            </div>
            <div class="bot-chat-actions">
                <button id="bot-minimize" type="button" aria-label="Minimizar asistente">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 12h14" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
        </div>
        <iframe
            id="bot-iframe"
            src="about:blank"
            data-src="https://upconsbot.onrender.com/"
            title="Asistente virtual de Upcons"
            sandbox="allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox"
            referrerpolicy="no-referrer"
            loading="lazy"
        ></iframe>
    </div>

    <script>
        // --- Lógica para el contador de carga del 3D ---
        const modelViewer = document.querySelector('#main-viewer');
        const loadingPercentage = document.querySelector('.loading-percentage');

        if (modelViewer && loadingPercentage) {
            const loadingOverlay = modelViewer.querySelector('.loading-overlay');

            // Escuchar el progreso de carga para actualizar el porcentaje
            modelViewer.addEventListener('progress', (event) => {
                const progress = event.detail.totalProgress;
                loadingPercentage.textContent = `Cargando...`;
            });


            // Escuchar cuando el modelo termine de cargar completamente
            modelViewer.addEventListener('load', () => {
                // Ocultar el overlay de carga cuando el modelo esté completamente listo
                setTimeout(() => {
                    loadingOverlay.classList.add('hide');
                }, 300); // Pequeño delay para una transición suave
            });
        }

        // --- Nueva Lógica para cambiar el contenido dinámico ---
        const contentButtons = document.querySelectorAll('.features-button');
        const contentPanels = document.querySelectorAll('.content-panel');

        contentButtons.forEach(button => {
            button.addEventListener('click', () => {
                const contentId = button.dataset.content;

                // Quitar la clase 'active' de todos los botones
                contentButtons.forEach(btn => {
                    btn.classList.remove('active');
                });
                // Añadir la clase 'active' al botón presionado
                button.classList.add('active');

                // Ocultar todos los paneles
                contentPanels.forEach(panel => {
                    panel.classList.remove('active');
                });

                // Mostrar el panel correspondiente
                const activePanel = document.getElementById(contentId);
                if (activePanel) {
                    activePanel.classList.add('active');
                }

                // Si el botón es el de 3D, activar el visor
                if (contentId === '3d-content' && modelViewer) {
                    const loadingOverlay = modelViewer.querySelector('.loading-overlay');
                    // Si el modelo aún no ha cargado, muestra el overlay. Si ya cargó, no hagas nada.
                    if (loadingOverlay && !modelViewer.loaded) {
                        loadingOverlay.classList.remove('hide');
                    }
                    // dismissPoster() ahora solo revela el modelo, no inicia la carga.
                    modelViewer.dismissPoster();
                }
            });
        });

        // --- Lógica para el asistente flotante ---
        const botButton = document.getElementById('bot-assistant-button');
        const botPanel = document.getElementById('bot-panel');
        const botIframe = document.getElementById('bot-iframe');
        const botMinimize = document.getElementById('bot-minimize');
        let isBotDragging = false;
        let dragOffsetX = 0;
        let dragOffsetY = 0;
        let botButtonDidDrag = false;
        const dragActivationDelay = 350;
        let dragActivationTimeout = null;
        let dragStartPoint = null;

        const loadBotIframe = () => {
            if (!botIframe) return;
            if (botIframe.src === 'about:blank' || botIframe.src === '') {
                botIframe.src = botIframe.dataset.src || 'https://upconsbot.onrender.com/';
            }
        };

        const clamp = (value, min, max) => Math.min(Math.max(value, min), max);

        const setButtonPosition = (x, y) => {
            if (!botButton) return;
            botButton.style.left = `${x}px`;
            botButton.style.top = `${y}px`;
            botButton.style.right = 'auto';
            botButton.style.bottom = 'auto';
        };

        const ensureButtonOnScreen = () => {
            if (!botButton) return;
            const rect = botButton.getBoundingClientRect();
            const maxX = window.innerWidth - rect.width - 6;
            const maxY = window.innerHeight - rect.height - 6;
            const newX = clamp(rect.left, 6, maxX);
            const newY = clamp(rect.top, 6, maxY);
            setButtonPosition(newX, newY);
        };

        const beginBotDrag = () => {
            if (!botButton || !dragStartPoint) return;
            const rect = botButton.getBoundingClientRect();
            isBotDragging = true;
            dragOffsetX = dragStartPoint.clientX - rect.left;
            dragOffsetY = dragStartPoint.clientY - rect.top;
            botButtonDidDrag = false;
            botButton.classList.add('dragging');
        };

        const scheduleBotDrag = (event) => {
            if (!botButton) return;
            const point = event.touches ? event.touches[0] : event;
            dragStartPoint = { clientX: point.clientX, clientY: point.clientY };
            clearTimeout(dragActivationTimeout);
            dragActivationTimeout = setTimeout(beginBotDrag, dragActivationDelay);
        };

        const cancelPendingDrag = () => {
            clearTimeout(dragActivationTimeout);
            dragActivationTimeout = null;
            dragStartPoint = null;
        };

        const onBotDrag = (event) => {
            if (!isBotDragging || !botButton) return;
            const point = event.touches ? event.touches[0] : event;
            const maxX = window.innerWidth - botButton.offsetWidth - 6;
            const maxY = window.innerHeight - botButton.offsetHeight - 6;
            const x = clamp(point.clientX - dragOffsetX, 6, maxX);
            const y = clamp(point.clientY - dragOffsetY, 6, maxY);
            setButtonPosition(x, y);
            botButtonDidDrag = true;
        };

        const endBotDrag = () => {
            cancelPendingDrag();
            if (!botButton) return;
            if (isBotDragging) {
                isBotDragging = false;
                botButton.classList.remove('dragging');
                ensureButtonOnScreen();
            }
            botButtonDidDrag = false; // Permite que el proximo toque abra/cierre sin consumir el click
        };

        const positionPanelNearButton = () => {
            if (!botPanel || !botButton) return;
            const btnRect = botButton.getBoundingClientRect();
            const panelRect = botPanel.getBoundingClientRect();
            const gap = 12;
            let left = btnRect.left + btnRect.width - panelRect.width;
            left = clamp(left, 8, window.innerWidth - panelRect.width - 8);
            let top = btnRect.top - panelRect.height - gap;
            if (top < 8) {
                top = btnRect.bottom + gap;
            }
            top = clamp(top, 8, window.innerHeight - panelRect.height - 8);
            botPanel.style.left = `${left}px`;
            botPanel.style.top = `${top}px`;
            botPanel.style.right = 'auto';
            botPanel.style.bottom = 'auto';
        };

        const openBotPanel = () => {
            if (!botPanel || !botButton) return;
            loadBotIframe();
            botPanel.classList.add('active');
            botPanel.setAttribute('aria-hidden', 'false');
            botButton.setAttribute('aria-expanded', 'true');
            positionPanelNearButton();
        };

        const closeBotPanel = () => {
            if (!botPanel || !botButton) return;
            botPanel.classList.remove('active');
            botPanel.setAttribute('aria-hidden', 'true');
            botButton.setAttribute('aria-expanded', 'false');
        };

        if (botButton && botPanel) {
            botButton.addEventListener('click', () => {
                if (botButtonDidDrag) {
                    botButtonDidDrag = false;
                    return;
                }
                if (botPanel.classList.contains('active')) {
                    closeBotPanel();
                } else {
                    openBotPanel();
                }
            });

            botButton.addEventListener('pointerdown', scheduleBotDrag);
            window.addEventListener('pointermove', onBotDrag);
            window.addEventListener('pointerup', endBotDrag);
            window.addEventListener('pointercancel', endBotDrag);
        }

        if (botMinimize) {
            botMinimize.addEventListener('click', (event) => {
                event.stopPropagation();
                closeBotPanel();
            });
        }

        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape' && botPanel && botPanel.classList.contains('active')) {
                closeBotPanel();
            }
        });

        window.addEventListener('resize', () => {
            ensureButtonOnScreen();
            if (botPanel && botPanel.classList.contains('active')) {
                positionPanelNearButton();
            }
        });
    </script>
</body>
</html>
